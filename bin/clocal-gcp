#!/usr/bin/env node

'use strict';

const program = require('commander');
var fs = require('fs');
  var  commandsArray = [];
let originpath = process.cwd() + "/src/services/cli-commands/";
fs.readdir(originpath, function(err, items) {
  const cloudFunctioncmd = require('../src/services/cli-commands/'+items[0]+'/cmd');
  const cloudMemoryStore = require('../src/services/cli-commands/'+items[1]+'/cmd');
  const cloudStoragecmd = require('../src/services/cli-commands/'+items[2]+'/cmd');
 commandsArray = [cloudFunctioncmd, cloudStoragecmd, cloudMemoryStore];
 program.version('1.0.0').description('Clocal GCP');
const commandNameList = [];

commandsArray.map(command => {
  commandNameList.push(command.commandName);
  program.command(command.commandName).action(command.action);
});

program.command('list').action(() => {
  const commandNames = commandNameList.reduce((prev, current) => {
    return `${prev}\n${current}`;
  }, '');
  console.log(commandNameList.toString());
});

program.parse(process.argv);
});
